<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>HTML5 Canvas</title>
    <link rel="icon" href="https://fav.farm/ðŸ”¥" />
    <style>
      html,
      body {
        margin: 0;
      }
    </style>
  </head>

  <body>
    <canvas id="draw" width="800" height="800"></canvas>

    <script>
      /**************************************************

        é–‹ç™¼æµç¨‹ï¼š

        1. ä½¿ç”¨JSæ“ä½œCanvas
            - æŠ“å–canvaså…ƒç´ 
            - å‰µå»ºcontextæ¸²æŸ“ç’°å¢ƒ
        
        2. è¨­å®šç•«å¸ƒå¤§å°
            - é•·å¯¬å æ»¿æ•´å€‹èž¢å¹•
        
        3. è¨­å®šç•«ç­†åƒæ•¸
            - ç•«ç­†æ¨£å¼
            - å¯¬åº¦
            - é¡è‰²
        
        4. ç›£è½äº‹ä»¶
            4-1. èž¢å¹•ç•«é¢å¤§å°
                  - ç•¶èž¢å¹•ç•«é¢å¤§å°æ”¹è®Šæ™‚ï¼Œèª¿æ•´ç•«å¸ƒå¤§å°
            4-2. æ»‘é¼ 
                  - æ»‘é¼ é»žæ“Šé–‹å§‹ç¹ªåœ–
                  - æ»‘é¼ ç§»å‹•ç•«å‡ºç·šæ¢
                  - æ»‘é¼ æ”¾é–‹çµæŸç¹ªåœ–
                  - æ»‘é¼ é›¢é–‹ç•«å¸ƒæ™‚ä¹Ÿè¦çµæŸç¹ªåœ–
        
        5. è®“ç•«ç­†å¯¬åº¦ï¼†é¡è‰²å‹•æ…‹è®ŠåŒ–
            - å¯¬åº¦å¾ž1åˆ°100éžå¢žï¼Œå†å¾ž100åˆ°1éžæ¸›
            - è‰²ç›¸åœ¨0Â°åˆ°360Â°ä¹‹é–“å¾ªç’°
      
      **************************************************/

      // DOMå…ƒç´ 
      const canvas = document.querySelector('#draw');
      const ctx = canvas.getContext('2d'); // æŒ‡å®šç‚º2Dæˆ–3Dçš„æ¸²æŸ“ç’°å¢ƒ

      // ç•«ç­†åƒæ•¸
      let isDrawing = false;
      let [lastX, lastY] = [0, 0];
      let cap = 'butt';
      let join = 'miter';
      let increment = 1;
      let width = 1;
      let hue = 0;

      function initializeCanvas() {
        // åˆå§‹åŒ–ç•«å¸ƒå¤§å°
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // åˆå§‹åŒ–ç•«ç­†è¨­å®š
        ctx.lineCap = cap;
        ctx.lineJoin = join;
        ctx.lineWidth = width;
        ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;
      }

      function draw(e, isDrawing) {
        if (!isDrawing) return; // åˆ¤æ–·æ˜¯å¦ç‚ºæ­£åœ¨ç¹ªåœ–çš„ç‹€æ…‹

        // ç•«ç­†è¨­å®š
        ctx.lineCap = cap;
        ctx.lineJoin = join;
        ctx.lineWidth = width;
        ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;

        // ç•«ç­†å®šä½
        const newX = e.offsetX;
        const newY = e.offsetY;

        // ç¹ªåœ–
        ctx.beginPath(); // å®£å‘Šè·¯å¾‘oré‡ç½®è·¯å¾‘
        ctx.moveTo(lastX, lastY); // ç·šæ¢çš„èµ·é»ž(ç§»å‹•åˆ°èµ·å§‹é»ž)
        ctx.lineTo(newX, newY); // ç·šæ¢çš„çµ‚é»ž(ç•«å‡ºç·šæ¢é€£æŽ¥åˆ°å…¶ä»–é»ž)
        ctx.stroke(); // é–‹å§‹ç¹ªåœ–

        // èª¿æ•´ç•«ç­†è¨­å®š
        [lastX, lastY] = [newX, newY];
        width += increment;
        if (width >= 100 || width <= 1) increment *= -1;
        hue++;
        if (hue >= 360) hue = 0;
      }

      canvas.addEventListener('mousedown', (e) => {
        isDrawing = true;
        [lastX, lastY] = [e.offsetX, e.offsetY];
      });
      canvas.addEventListener('mousemove', (e) => draw(e, isDrawing));
      canvas.addEventListener('mouseup', () => (isDrawing = false));
      canvas.addEventListener('mouseout', () => (isDrawing = false));
      window.addEventListener('resize', initializeCanvas);
      initializeCanvas();
    </script>

    <!--

      æ³•äºŒï¼š
      ç›£è½äº‹ä»¶çš„å¦ä¸€ç¨®æ–¹å¼

      <script>
        // ä¸å†éœ€è¦ isDrawing è®Šæ•¸
        function draw(e) {
          ctx.lineCap = cap;
          ctx.lineJoin = join;
          ctx.lineWidth = width;
          ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;
  
          const newX = e.offsetX;
          const newY = e.offsetY;
  
          ctx.beginPath();
          ctx.moveTo(lastX, lastY);
          ctx.lineTo(newX, newY);
          ctx.stroke();
  
          [lastX, lastY] = [newX, newY];
          width += increment;
          if (width >= 100 || width <= 1) increment *= -1;
          hue++;
          if (hue >= 360) hue = 0;
        }
  
        // ç›£è½äº‹ä»¶
        canvas.addEventListener('mousedown', (e) => {
          isDrawing = true;
          [lastX, lastY] = [e.offsetX, e.offsetY];
          canvas.addEventListener('mousemove', draw);
        });
        canvas.addEventListener('mouseup', () => {
          canvas.removeEventListener('mousemove', draw);
        });
        canvas.addEventListener('mouseout', () => {
          canvas.removeEventListener('mousemove', draw);
        });
        window.addEventListener('resize', initializeCanvas);
        initializeCanvas();
      </script>
      
    -->
  </body>
</html>
