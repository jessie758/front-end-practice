<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Hold Shift to Check Multiple Checkboxes</title>
    <link rel="icon" href="https://fav.farm/ğŸ”¥" />
  </head>

  <body>
    <!--
      é¡Œç›®èªªæ˜ï¼š
      ç•¶å‹¾é¸å…¶ä¸­ä¸€å€‹é …ç›®å¾Œï¼ŒæŒ‰ä¸‹shiftï¼Œå†å‹¾é¸å¦ä¸€å€‹é …ç›®ï¼Œ
      å‰‡åœ¨å…©å€‹è¢«é¸å–çš„é …ç›®ä¹‹é–“çš„æ‰€æœ‰é …ç›®çš†æœƒè¢«å‹¾é¸ã€‚
    -->

    <div class="inbox">
      <div class="item">
        <input type="checkbox" />
        <p>This is an inbox layout.</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Check one item</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Hold down your Shift key</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Check a lower item</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Everything in between should also be set to checked</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Try to do it without any libraries</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Just regular JavaScript</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Good Luck!</p>
      </div>
      <div class="item">
        <input type="checkbox" />
        <p>Don't forget to tweet your result!</p>
      </div>
    </div>

    <style>
      html {
        font-family: sans-serif;
        background: #ffc600;
      }

      .inbox {
        max-width: 400px;
        margin: 50px auto;
        background: white;
        border-radius: 5px;
        box-shadow: 10px 10px 0 rgba(0, 0, 0, 0.1);
      }

      .item {
        display: flex;
        align-items: center;
        border-bottom: 1px solid #f1f1f1;
      }

      .item:last-child {
        border-bottom: 0;
      }

      input:checked + p {
        background: #f9f9f9;
        text-decoration: line-through;
      }

      input[type='checkbox'] {
        margin: 20px;
      }

      p {
        margin: 0;
        padding: 20px;
        transition: background 0.2s;
        flex: 1;
        font-family: 'helvetica neue';
        font-size: 20px;
        font-weight: 200;
        border-left: 1px solid #d1e2ff;
      }
    </style>

    <!--

      ç›®æ¨™ï¼š
      åµæ¸¬shiftéµï¼†è¢«é¸å–çš„å…©å€‹é …ç›®
      å¯¦ç¾ä¸€æ¬¡å‹¾é¸å¤šå€‹é …ç›®çš„æ•ˆæœ

      é–‹ç™¼æµç¨‹ï¼š
      1. å…ˆæŠ“å–æ‰€æœ‰checkboxå…ƒç´ 
      2. å„²å­˜è¢«é¸å–çš„ç¬¬ä¸€å€‹é …ç›®
      3. åµæ¸¬shiftéµ
      4. ç•¶é¸å–ç¬¬äºŒå€‹"æœªå‹¾é¸çš„"é …ç›®æ™‚ï¼Œå°‡å…©è€…ä¹‹é–“çš„æ‰€æœ‰é …ç›®å‹¾é¸èµ·ä¾†
      5. å°‡ç•¶å‰è¢«é¸å–çš„é …ç›®æ›´æ–°ç‚ºç¬¬äºŒå€‹é¸å–çš„é …ç›®

      å…¶ä»–ï¼š
      shiftéµå¯ç›´æ¥ä½¿ç”¨e.shiftKeyä¾†åˆ¤æ–·ï¼ˆå›å‚³å¸ƒæ—å€¼ï¼‰

    -->

    <!-- æ³•ä¸€ -->
    <script>
      const checkboxes = [
        ...document.querySelectorAll('.inbox input[type="checkbox"]'),
      ];
      let firstIndexSelected = 0;
      let shiftPressed = false;

      function checkCheckbox(secondIndexSelected) {
        const [startIndex, endIndex] =
          firstIndexSelected > secondIndexSelected
            ? [secondIndexSelected, firstIndexSelected]
            : [firstIndexSelected, secondIndexSelected];
        for (let i = startIndex; i <= endIndex; i++) {
          if (!checkboxes[i]['checked']) checkboxes[i]['checked'] = true;
        }
      }

      function changeCheckboxSelected(secondIndexSelected) {
        firstIndexSelected = secondIndexSelected;
      }

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Shift') shiftPressed = true;
      });

      document.addEventListener('keyup', (e) => {
        shiftPressed = false;
      });

      checkboxes.forEach((checkbox) => {
        checkbox.addEventListener('click', (e) => {
          const secondIndexSelected = checkboxes.indexOf(e.target);
          // é¸å–checkboxå¾Œæ‰æœƒåˆ¤æ–·æ˜¯å¦ç‚ºæœªå‹¾é¸ç‹€æ…‹
          if (!e.target['checked']) {
            changeCheckboxSelected(secondIndexSelected);
          } else {
            if (shiftPressed) checkCheckbox(secondIndexSelected);
            changeCheckboxSelected(secondIndexSelected);
          }
        });
      });
    </script>

    <!-- æ³•äºŒï¼ˆe.shiftKeyï¼‰

    <script>
      const checkboxes = [
        ...document.querySelectorAll('.inbox input[type="checkbox"]'),
      ];
      let firstIndexSelected = 0;

      function checkCheckbox(secondIndexSelected) {
        const [startIndex, endIndex] = firstIndexSelected > secondIndexSelected ? [secondIndexSelected, firstIndexSelected] : [firstIndexSelected, secondIndexSelected];
        for (let i = startIndex; i <= endIndex; i++) {
          checkboxes[i]['checked'] = true;
        }
      }

      function changeCheckboxSelected(secondIndexSelected) {
        firstIndexSelected = secondIndexSelected;
      }

      checkboxes.forEach((checkbox) => {
        checkbox.addEventListener('click', (e) => {
          const secondIndexSelected = checkboxes.indexOf(e.target);
          if (e.target['checked'] && e.shiftKey) checkCheckbox(secondIndexSelected);
          changeCheckboxSelected(secondIndexSelected);
        });
      });
    </script>

    -->

    <!-- æ³•ä¸‰ï¼ˆinBetweenï¼‰
    
    <script>
      const checkboxes = document.querySelectorAll(
        '.inbox input[type="checkbox"]'
      );

      // STEP2-1 è™•ç† checkbox è¢« click çš„äº‹ä»¶
      checkboxes.forEach((checkbox) =>
        checkbox.addEventListener('click', checkHandler)
      );

      let prevCheck;

      function checkHandler(e) {
        let inBetween = false;

        // STEP2-2 å¦‚æœä½¿ç”¨è€…æŒ‰ä½ shift ä¸”å‹¾é¸æŸå€‹é …ç›®
        if (e.shiftKey && e.target.checked) {
          checkboxes.forEach((checkbox) => {
            // STEP2-3 æŠŠ inBetween é–‹å•Ÿå’Œé—œé–‰ï¼ˆç¬¬ä¸€æ¬¡ç¢°åˆ°é–‹å•Ÿï¼Œç¬¬äºŒæ¬¡ç¢°åˆ°é—œé–‰ï¼‰
            if (checkbox === prevCheck || checkbox === e.target) {
              inBetween = !inBetween;
            }
            // STEP2-4 å¦‚æœ inBetween ç‚º trueï¼Œå‰‡æŠŠè©² checkbox å‹¾é¸
            if (inBetween) {
              checkbox.checked = true;
            }
          });
        }

        // STEP2-5 ç´€éŒ„ä¸Šä¸€æ¬¡å‹¾é¸çš„æ˜¯å“ªå€‹ checkbox
        prevCheck = e.target;
      }
    </script>
  
    -->
  </body>
</html>
