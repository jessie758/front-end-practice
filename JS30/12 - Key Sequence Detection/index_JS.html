<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Key Detection</title>
    <link rel="icon" href="https://fav.farm/ðŸ”¥" />
  </head>

  <body>
    <script type="text/javascript" src="./cornify.js"></script>

    <script>
      /*
        ç›®æ¨™ï¼š
        ç•¶ä½¿ç”¨è€…è¼¸å…¥ç‰¹å®šçš„å­—ä¸²å¾Œï¼Œè®“ç¶²é ç”¢ç”Ÿç‰¹æ®Šæ•ˆæžœ

        æµç¨‹ï¼š
        1. ç›£è½ä½¿ç”¨è€…çš„è¼¸å…¥ä¸¦å„²å­˜ä¸‹ä¾†
        2. å°‡è¼¸å…¥èˆ‡é—œéµå­—é€²è¡Œæ¯”å°
        3. å‹•æ…‹åœ°æ¸…ç†è¼¸å…¥çš„ç·©å­˜
      */

      const input = [];
      const keyword = 'jessie';

      // ç›£è½ document æˆ– window éƒ½å¯ä»¥
      // ä½†å¿…é ˆä½¿ç”¨ keydown/keyup è€Œéž keypress äº‹ä»¶ï¼Œæ‰èƒ½ç›£è½ç‰¹æ®ŠæŒ‰éµçš„è¼¸å…¥
      document.addEventListener('keyup', (e) => {
        // æ•æ‰ä¸¦å„²å­˜ä½¿ç”¨è€…çš„è¼¸å…¥
        input.push(e.key);
        
        // inputè¶…å‡ºæŒ‡å®šå€‹æ•¸æ™‚æ¸…ç†ç·©å­˜
        // input.splice(0, input.length - keyword.length);
        if (input.length > keyword.length) input.shift();

        if (input.join('').includes(keyword)) {
          console.log('Bingo!');
          cornify_add();
        }
      });
    </script>
  </body>
</html>
